<!DOCTYPE html>
<html ng-app="app">
<head>
<style>
.xLabel, .yLabel, .legendLabel {
	font-size: 9px;
	font-family: Verdana;
}
.tooltip {
	font-size: 9px;
	font-family: Verdana;
	background-color: #333333;
	padding: 5px;
	color: #ffffff;
	border-radius: 3px;
	opacity: 0.7;
}
.category {
	font-size: 12px;
	font-family: Verdana;
	padding: 5px;
	border-radius: 3px;
	opacity: 0.7;
}

.Ycategory {
	font-size: 12px;
	font-family: Verdana;
	padding: 5px;
	border-radius: 3px;
	opacity: 0.7;
	transform: rotate(-90deg);
}

.chart {
	width: 30%;
	height: 300px;
	background-color: #ffffff;
	float: left

}

.chart2{
	width: 30%;
	height: 300px;
	background-color: #ffffff;
	clear: both;
	float: left;
}
.square {
	cursor: pointer;
}
</style>
</head>
<body ng-controller="democontroller">
<br/>

<heatmap class="chart" data="data" dispatch="dispatch" options="options"></heatmap>
<heatmap class="chart" data="data2" dispatch="dispatch" options="options3"></heatmap>
<br/>
<heatmap class="chart2" data="data4" dispatch="dispatch" options="options"></heatmap>
<heatmap class="chart" data="data3" dispatch="dispatch" options="options3"></heatmap>

</body>
<script src="ttps://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
<script src="js/data.js"></script>
<script src="js/heatmap.js"></script>
<script>
var app = angular.module("app", ["heatmap"]);
var tooltip = d3.select("body")
	.append("div")
	.style("position", "absolute")
	.style("z-index", "10")
	.style("visibility", "hidden")
	.text("a simple tooltip")
	.classed("tooltip", true);
	
var paper = d3.select("body")
	.append("div")
	.style("position", "absolute")
	.style("top","100px")
	.style("left","1000px")
	.style("z-index", "10")
	.style("visibility", "hidden")
	.text("a simple tooltip")
	.classed("tooltip", true);

var titleOne = d3.select("body").append("div").style("position", "absolute").style("top","0.1%").style("left","16%").text("Context")
	.classed("category", true);

var titleTwo = d3.select("body").append("div").style("position", "absolute").style("top","22%").style("left","0.1%").text("Data Source")
	.classed("Ycategory", true);
	
var title2One = d3.select("body").append("div").style("position", "absolute").style("top","0.1%").style("left","46%").text("Vis. Strategy")
	.classed("category", true);

var title2Two = d3.select("body").append("div").style("position", "absolute").style("top","22%").style("left","29%").text("Purpose")
	.classed("Ycategory", true);
	
var title3One = d3.select("body").append("div").style("position", "absolute").style("top","41%").style("left","16%").text("Context")
	.classed("category", true);

var title3Two = d3.select("body").append("div").style("position", "absolute").style("top","63%").style("left","0.1%").text("Data Source")
	.classed("Ycategory", true);
	
var title4One = d3.select("body").append("div").style("position", "absolute").style("top","41%").style("left","42%").text("Context / Size / Source / Audience")
	.classed("category", true);

var title4Two = d3.select("body").append("div").style("position", "absolute").style("top","63%").style("left","29%").text("Purpose")
	.classed("Ycategory", true);
	
	/*var tmp=d3.select("svg");
	tmp.append("line").attr("y1",800).attr("y2",1000).attr("x1",10).attr("x2",10000).style("stroke","black");
	*/
app.controller("democontroller", function($scope) {
	
	$scope.data = data;
	$scope.data2 = data2;
	$scope.data3 = data3;
	$scope.data4 = data4;

	$scope.options = {
		buckets: 10,
		margin: { top: 100, right: 0, bottom: 50, left: 120 },
		//colors: ["#f7fbff", "#deebf7", "#c6dbef", "#9ecae1", "#6baed6", "#4292c6", "#2171b5", "#08519c", "#08306b"]
		colors: ["#ffffff","#ffffd9", "#edf8b1", "#c7e9b4", "#7fcdbb", "#41b6c4", "#1d91c0", "#225ea8", "#253494", "#081d58"]

	};
	
	$scope.options3 = {
		buckets: 10,
		margin: { top: 100, right: 0, bottom: 50, left: 150 },
		colors: ["#ffffff","#ffffd9", "#edf8b1", "#c7e9b4", "#7fcdbb", "#41b6c4", "#1d91c0", "#225ea8", "#253494", "#081d58"]
	};
	
	$scope.options2 = {
		margin: { top: 150, right: 0, bottom: 100, left: 120 },
		colors: [
			["#f7fbff", "#deebf7", "#c6dbef", "#9ecae1", "#6baed6", "#4292c6", "#2171b5", "#08519c", "#08306b"],
			["#fff5eb", "#fee6ce", "#fdd0a2", "#fdae6b", "#fd8d3c", "#f16913", "#d94801", "#a63603", "#7f2704"]
		],
		breaks: [4],
		legend: false
	};
	
	$scope.$watch("dispatch", function() {
		if ($scope.dispatch) {
			$scope.dispatch.on("click", function(e) {
				console.log(e);
			});
			$scope.dispatch.on("mouseover", function(e) {
				paper.text("This will have the citations").style("visibility", "visible");
				return tooltip.text(e.y + ": " + e.x + " (" + e.value + ")").style("visibility", "visible");
			})
			$scope.dispatch.on("mousemove", function(e) {
				return tooltip.style("top", (d3.event.pageY - 10) + "px").style("left", (d3.event.pageX + 10) + "px");
			})
			$scope.dispatch.on("mouseout", function(e) {
				paper.style("visibility", "hidden");
				return tooltip.style("visibility", "hidden");
			});
		}
	}, true);
});
</script>
</html>